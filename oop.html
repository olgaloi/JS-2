<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Object Oriented Programming</title>
	<style type="text/css">
		.new-input {
			display: inline-block;
			margin-top: 10px;
		}
	</style>
</head>
<body>
	<input type="text" class="text">
	<input type="checkbox" class="check">
	<br>
	
	<script>
		function InputText(element) {
			if(typeof element === 'string') {
				element = document.querySelector(element);
			}

			var _this = this,
				check = document.querySelector('.check');

			check.checked = false;

			this.element = element;
			this.textInput = document.createElement('div');
			this.textInputBody = document.createElement('div');
			this.checkInput = document.createElement('input');
			this.checkInput.type = "checkbox";

			this.textInput.classList.add('new-input');
			this.textInputBody.classList.add('new-input-body');
			this.checkInput.classList.add('new-check');

			this.checkInput.onchange = function() {
				_this.hide();
			}
		}

		InputText.prototype.show = function() {	
			var check = document.querySelector('.check');

			if(check.checked == true)  {
				this.textInput.appendChild(this.textInputBody);
				document.querySelector('body').appendChild(this.textInput);
				this.textInputBody.innerHTML = this.element.value;
				this.textInput.appendChild(this.checkInput);
				this.checkInput.checked = true;
				document.querySelector('body').removeChild(check);
			}
		}

		InputText.prototype.hide = function() {
			if(this.checkInput.checked == false) {
				document.querySelector('body').removeChild(this.textInput);

				var oldCheckInput = document.createElement('input');
				oldCheckInput.type = "checkbox";
				oldCheckInput.classList.add('check');

				var oldTextInput = document.querySelector('.text');

				function insertAfter(newNode, referenceNode) {
					referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling)
				}

				insertAfter(oldCheckInput, oldTextInput);

				oldCheckInput.onchange = function() {
					inputText.show();
				}
			}
		}

		var inputText = new InputText('.text');
		document.querySelector('.check').onchange = function() {inputText.show()}
	</script>
</body>
</html>